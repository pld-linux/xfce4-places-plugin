diff -ur xfce4-places-plugin-1.2.0/configure.in xfce4-places-plugin-1.2.0-ui/configure.in
--- xfce4-places-plugin-1.2.0/configure.in	2011-02-19 19:56:33.307345133 +0100
+++ xfce4-places-plugin-1.2.0-ui/configure.in	2011-02-19 18:48:59.894090914 +0100
@@ -22,8 +22,8 @@
 dnl check for required packages
 XDT_CHECK_PACKAGE([GTK], [gtk+-2.0], [2.6.0])
 XDT_CHECK_PACKAGE([LIBXFCE4UTIL], [libxfce4util-1.0], [4.3.90.2])
-XDT_CHECK_PACKAGE([LIBXFCEGUI4], [libxfcegui4-1.0], [4.3.90.2])
-XDT_CHECK_PACKAGE([LIBXFCE4PANEL], [libxfce4panel-1.0], [4.3.90.2])
+XDT_CHECK_PACKAGE([LIBXFCE4UI], [libxfce4ui-1], [4.8.0])
+XDT_CHECK_PACKAGE([LIBXFCE4PANEL], [libxfce4panel-1.0], [4.8.0])
 XDT_CHECK_PACKAGE([THUNAR_VFS], [thunar-vfs-1], [0.3.2])
 XDT_CHECK_PACKAGE([EXO], [exo-1], [0.5.0])
 
diff -ur xfce4-places-plugin-1.2.0/panel-plugin/button.c xfce4-places-plugin-1.2.0-ui/panel-plugin/button.c
--- xfce4-places-plugin-1.2.0/panel-plugin/button.c	2009-07-31 07:10:48.000000000 +0200
+++ xfce4-places-plugin-1.2.0-ui/panel-plugin/button.c	2011-02-19 18:45:53.391090938 +0100
@@ -50,8 +50,7 @@
 #endif
 
 #include <gtk/gtk.h>
-#include <libxfce4panel/xfce-panel-plugin.h>
-#include <libxfce4panel/xfce-hvbox.h>
+#include <libxfce4panel/libxfce4panel.h>
 #include <string.h>
 
 #define EXO_API_SUBJECT_TO_CHANGE
diff -ur xfce4-places-plugin-1.2.0/panel-plugin/cfg.c xfce4-places-plugin-1.2.0-ui/panel-plugin/cfg.c
--- xfce4-places-plugin-1.2.0/panel-plugin/cfg.c	2009-05-28 05:05:53.000000000 +0200
+++ xfce4-places-plugin-1.2.0-ui/panel-plugin/cfg.c	2011-02-19 19:02:27.147992840 +0100
@@ -28,9 +28,8 @@
 #include <gtk/gtk.h>
 
 #include <libxfce4util/libxfce4util.h>
-#include <libxfce4panel/xfce-panel-plugin.h>
-#include <libxfce4panel/xfce-panel-convenience.h>
-#include <libxfcegui4/libxfcegui4.h>
+#include <libxfce4panel/libxfce4panel.h>
+#include <libxfce4ui/libxfce4ui.h>
 
 #include "cfg.h"
 #include "view.h"
@@ -344,7 +343,7 @@
     vbox_button = gtk_vbox_new(FALSE, 4);
     gtk_widget_show(vbox_button);
 
-    frame_button = xfce_create_framebox_with_content(_("Button"), vbox_button);
+    frame_button = xfce_gtk_frame_box_new_with_content(_("Button"), vbox_button);
     gtk_box_pack_start(GTK_BOX(GTK_DIALOG(dlg)->vbox), frame_button, FALSE, FALSE, 0);
 
 
@@ -401,7 +400,7 @@
     vbox_menu = gtk_vbox_new(FALSE, 4);
     gtk_widget_show(vbox_menu);
 
-    frame_menu = xfce_create_framebox_with_content(_("Menu"), vbox_menu);
+    frame_menu = xfce_gtk_frame_box_new_with_content(_("Menu"), vbox_menu);
     gtk_box_pack_start(GTK_BOX(GTK_DIALOG(dlg)->vbox), frame_menu, FALSE, FALSE, 0);
 
     /* MENU: Show Icons */
@@ -483,7 +482,7 @@
     gtk_widget_set_sensitive(vbox_recent, cfg->show_recent);
     g_object_set_data(G_OBJECT(tmp_widget), "cfg_transient", vbox_recent);
 
-    frame_recent = xfce_create_framebox_with_content(_("Recent Documents"), vbox_recent);
+    frame_recent = xfce_gtk_frame_box_new_with_content(_("Recent Documents"), vbox_recent);
     gtk_box_pack_start(GTK_BOX(GTK_DIALOG(dlg)->vbox), frame_recent, FALSE, FALSE, 0);
 
     /* RECENT DOCUMENTS: Show clear option */
@@ -522,7 +521,7 @@
     vbox_search = gtk_vbox_new(FALSE, 4);
     gtk_widget_show(vbox_search);
 
-    frame_search = xfce_create_framebox_with_content(_("Search"), vbox_search);
+    frame_search = xfce_gtk_frame_box_new_with_content(_("Search"), vbox_search);
     gtk_box_pack_start(GTK_BOX(GTK_DIALOG(dlg)->vbox), frame_search, FALSE, FALSE, 0);
 
     /* Search: command */
@@ -543,7 +543,7 @@
     gtk_widget_show(tmp_widget);
     gtk_box_pack_start(GTK_BOX(tmp_box), tmp_widget, FALSE, FALSE, 0);
 
-    gtk_widget_show(dlg);
+    gtk_widget_show_all(dlg);
 }
 
 /********** Initialization & Finalization **********/
diff -ur xfce4-places-plugin-1.2.0/panel-plugin/cfg.h xfce4-places-plugin-1.2.0-ui/panel-plugin/cfg.h
--- xfce4-places-plugin-1.2.0/panel-plugin/cfg.h	2008-01-09 02:20:42.000000000 +0100
+++ xfce4-places-plugin-1.2.0-ui/panel-plugin/cfg.h	2011-02-19 18:46:21.145090935 +0100
@@ -23,7 +23,7 @@
 #define _XFCE_PANEL_PLACES_CFG_H
 
 #include <glib.h>
-#include <libxfce4panel/xfce-panel-plugin.h>
+#include <libxfce4panel/libxfce4panel.h>
 #include "view.h"
 
 typedef struct
diff -ur xfce4-places-plugin-1.2.0/panel-plugin/Makefile.am xfce4-places-plugin-1.2.0-ui/panel-plugin/Makefile.am
--- xfce4-places-plugin-1.2.0/panel-plugin/Makefile.am	2008-11-23 12:07:43.000000000 +0100
+++ xfce4-places-plugin-1.2.0-ui/panel-plugin/Makefile.am	2011-02-19 18:50:18.926090915 +0100
@@ -50,14 +50,14 @@
 	-DPACKAGE_LOCALE_DIR=\"$(localedir)\"				\
 	$(GTK_CFLAGS)							\
 	$(LIBXFCE4UTIL_CFLAGS)						\
-	$(LIBXFCEGUI4_CFLAGS)						\
+	$(LIBXFCE4UI_CFLAGS)						\
 	$(LIBXFCE4PANEL_CFLAGS)						\
         $(THUNAR_VFS_CFLAGS)						\
 	$(PLATFORM_CFLAGS)
 
 xfce4_places_plugin_LDADD =						\
 	$(LIBXFCE4UTIL_LIBS)						\
-	$(LIBXFCEGUI4_LIBS)						\
+	$(LIBXFCE4UI_LIBS)						\
 	$(LIBXFCE4PANEL_LIBS)						\
 	@THUNAR_VFS_LIBS@
 
diff -ur xfce4-places-plugin-1.2.0/panel-plugin/places.c xfce4-places-plugin-1.2.0-ui/panel-plugin/places.c
--- xfce4-places-plugin-1.2.0/panel-plugin/places.c	2008-01-09 02:20:42.000000000 +0100
+++ xfce4-places-plugin-1.2.0-ui/panel-plugin/places.c	2011-02-19 18:46:45.605090908 +0100
@@ -26,7 +26,7 @@
 #include <glib.h>
 
 #include <libxfce4util/libxfce4util.h>
-#include <libxfce4panel/xfce-panel-plugin.h>
+#include <libxfce4panel/libxfce4panel.h>
 
 #include "places.h"
 #include "view.h"
diff -ur xfce4-places-plugin-1.2.0/panel-plugin/support.c xfce4-places-plugin-1.2.0-ui/panel-plugin/support.c
--- xfce4-places-plugin-1.2.0/panel-plugin/support.c	2011-02-19 19:56:33.295345133 +0100
+++ xfce4-places-plugin-1.2.0-ui/panel-plugin/support.c	2011-02-19 18:55:40.248090913 +0100
@@ -29,7 +29,7 @@
 #include <glib.h>
 
 #include <libxfce4util/libxfce4util.h>
-#include <libxfcegui4/libxfcegui4.h>
+#include <libxfce4ui/libxfce4ui.h>
 
 #define EXO_API_SUBJECT_TO_CHANGE
 #include <exo/exo.h>
@@ -125,7 +125,8 @@
 places_gui_exec(const gchar *cmd)
 {
     if(cmd != NULL && *cmd != '\0')
-        xfce_exec(cmd, FALSE, TRUE, NULL);
+        xfce_spawn_command_line_on_screen(gdk_screen_get_default(),
+                        cmd, FALSE, TRUE, NULL);
 }
 
 static void
diff -ur xfce4-places-plugin-1.2.0/panel-plugin/view.c xfce4-places-plugin-1.2.0-ui/panel-plugin/view.c
--- xfce4-places-plugin-1.2.0/panel-plugin/view.c	2009-07-31 07:10:48.000000000 +0200
+++ xfce4-places-plugin-1.2.0-ui/panel-plugin/view.c	2011-02-19 19:55:56.765345098 +0100
@@ -49,10 +49,8 @@
 #define USE_GTK_TOOLTIP_API     GTK_CHECK_VERSION(2,12,0)
 
 #include <libxfce4util/libxfce4util.h>
-#include <libxfce4panel/xfce-panel-plugin.h>
-#include <libxfce4panel/xfce-panel-convenience.h>
-#include <libxfce4panel/xfce-hvbox.h>
-#include <libxfcegui4/libxfcegui4.h>
+#include <libxfce4panel/libxfce4panel.h>
+#include <libxfce4ui/libxfce4ui.h>
 
 #define EXO_API_SUBJECT_TO_CHANGE
 #include <exo/exo.h>
@@ -511,7 +509,7 @@
                 icon_size = MAX(width, height);
         else
                 icon_size = 32;
-        pb = xfce_themed_icon_load(bookmark->icon, icon_size);
+        pb = xfce_panel_pixbuf_from_source(bookmark->icon, NULL, icon_size);
 
         if(G_LIKELY(pb != NULL)){
             image = gtk_image_new_from_pixbuf(pb);
@@ -739,7 +737,19 @@
 static GdkPixbuf*
 pview_pixbuf_factory(gint size)
 {
-    return xfce_themed_icon_load_category(2, size);
+   static const gchar *icons[] = { "system-file-manager",
+                                   "xfce-filemanager",
+                                   "file-manager",
+                                   "folder",
+                                   NULL };
+   int i = 0;
+   GdkPixbuf *pb = NULL;
+
+   while (icons[i] && !pb) {
+      pb = xfce_panel_pixbuf_from_source(icons[i], NULL, size);
+      i++;
+   }
+   return pb;
 }
 
 static void
diff -ur xfce4-places-plugin-1.2.0/panel-plugin/view.h xfce4-places-plugin-1.2.0-ui/panel-plugin/view.h
--- xfce4-places-plugin-1.2.0/panel-plugin/view.h	2008-01-09 02:20:42.000000000 +0100
+++ xfce4-places-plugin-1.2.0-ui/panel-plugin/view.h	2011-02-19 18:47:20.404090918 +0100
@@ -25,7 +25,7 @@
 
 #include <glib.h>
 #include <gtk/gtk.h>
-#include <libxfce4panel/xfce-panel-plugin.h>
+#include <libxfce4panel/libxfce4panel.h>
 
 #define USE_RECENT_DOCUMENTS    GTK_CHECK_VERSION(2,10,0)
 
